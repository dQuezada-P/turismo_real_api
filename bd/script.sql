
--**** DROPS TABLES ****---

DROP TABLE RESERVA;

DROP TABLE CHECKOUT;

DROP TABLE CHECKIN;

DROP TABLE SERVICIO;

DROP TABLE TRANSPORTE;

DROP TABLE TOUR;

DROP TABLE DEPARTAMENTO;

DROP TABLE LOCALIDAD;

DROP TABLE INVENTARIO;

DROP TABLE USUARIO;

DROP TABLE ROL;

DROP TABLE PRODUCTO;

DROP TABLE CATEGORIA;

--**** DROPS SEQUENCES ***----

DROP SEQUENCE ROL_AUTO;

DROP SEQUENCE CATEGORIA_AUTO;

DROP SEQUENCE LOCALIDAD_AUTO;


--**** TURISMO REAL ****-----

CREATE TABLE CATEGORIA(
    ID NUMBER NOT NULL PRIMARY KEY,
    DESCRIPCION VARCHAR2(60) NOT NULL
);


CREATE SEQUENCE CATEGORIA_AUTO START WITH 1 INCREMENT BY 1;

INSERT INTO CATEGORIA VALUES(CATEGORIA_AUTO.NEXTVAL,'MUEBLERIA');

INSERT INTO CATEGORIA VALUES(CATEGORIA_AUTO.NEXTVAL,'SERVICIOS BASICO');

INSERT INTO CATEGORIA VALUES(CATEGORIA_AUTO.NEXTVAL,'DECORACION');


CREATE TABLE PRODUCTO(
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(60) NOT NULL,
    PRECIO NUMBER NOT NULL,
    ID_CATEGORIA NUMBER NOT NULL,
    CONSTRAINT FK_ID_CATEGORIA FOREIGN KEY(ID_CATEGORIA) REFERENCES CATEGORIA (ID)
);

INSERT INTO PRODUCTO VALUES('1','SILLA','2000',1);

INSERT INTO PRODUCTO VALUES('2','MESA','6000',1);

INSERT INTO PRODUCTO VALUES('3','INTERNET','10000',2);

INSERT INTO PRODUCTO VALUES('4','LAMPARA','1000',1);



--**** TABLE ROL ****---

CREATE TABLE ROL(
    ID NUMBER NOT NULL PRIMARY KEY,
    DESCRIPCION VARCHAR2(60) NOT NULL
);

CREATE SEQUENCE ROL_AUTO START WITH 1 INCREMENT BY 1;

INSERT INTO ROL VALUES(ROL_AUTO.NEXTVAL,'ADMINISTRADOR');

INSERT INTO ROL VALUES(ROL_AUTO.NEXTVAL,'FUNCIONARIO');

INSERT INTO ROL VALUES(ROL_AUTO.NEXTVAL,'CLIENTE');

--**** TABLE USER ****---

CREATE TABLE USUARIO(
    RUT VARCHAR2(10) NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR(60) NOT NULL,
    APELLIDO VARCHAR(60) NOT NULL,
    CORREO VARCHAR(60) UNIQUE NOT NULL,
    ESTADO CHAR NOT NULL,
    DIRECCION VARCHAR(60) NOT NULL,
    TELEFONO VARCHAR2(60) NOT NULL,
    PASS VARCHAR2(60)NOT NULL,
    ID_ROL NUMBER NOT NULL,
    CONSTRAINT FK_ROL_ID FOREIGN KEY(ID_ROL) REFERENCES ROL (ID)
);

INSERT INTO USUARIO VALUES('18937755-K','CLAUDIO','ABELE','CL.DUOC@DUOCUC.CL','Y','TU CASA','9-12345678','123','1');
INSERT INTO USUARIO VALUES('20141805-4','NICOLAS','CASTILLO','NI.CASTILLOL@DUOCUC.CL','N','LA CASA DEL','9-12345678','123','2');
INSERT INTO USUARIO VALUES('21234325-2','DIEGO','PAVEZ','DDDDDDDDDD@DUOCUC.CL','N','LA CASA DEL','9-12345678','123','3');


--**** TABLE LOCATION ****-----

CREATE TABLE LOCALIDAD(
    ID NUMBER PRIMARY KEY NOT NULL,
    NOMBRE VARCHAR2(60)
);

CREATE SEQUENCE LOCALIDAD_AUTO START WITH 1 INCREMENT BY 1;

INSERT INTO LOCALIDAD VALUES(LOCALIDAD_AUTO.NEXTVAL,'SANTIAGO');

INSERT INTO LOCALIDAD VALUES(LOCALIDAD_AUTO.NEXTVAL,'LA SERENA');

INSERT INTO LOCALIDAD VALUES(LOCALIDAD_AUTO.NEXTVAL,'PUERTO VARAS');


--**** TABLE DEPARTAMENT ****--

CREATE TABLE DEPARTAMENTO(
    ID VARCHAR2(60) NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR(60) NOT NULL,
    NUMERO_BANNO NUMBER NOT NULL,
    NUMERO_HABITACION NUMBER NOT NULL,
    FECHA_INS DATE NOT NULL,
    DIRECCION VARCHAR2(60) NOT NULL,
    VALOR_ARRIENDO NUMBER NOT NULL,
    ID_LOCALIDAD NUMBER NOT NULL,
    DESCRIPCION VARCHAR2(60),
    CONSTRAINT FK_ID_LOCALIDAD FOREIGN KEY(ID_LOCALIDAD) REFERENCES LOCALIDAD (ID)
);

INSERT INTO DEPARTAMENTO VALUES('1','DEPTO BASICO',1,2,'22-08-22','MI CASA',5000,1,'TURISTAS');
INSERT INTO DEPARTAMENTO VALUES('2','DEPTO BASICO',1,1,'22-08-22','MI CASA',4000,2,'TURISTAS');
INSERT INTO DEPARTAMENTO VALUES('3','DEPTO BASICO',2,2,'22-08-22','MI CASA',7000,3,'TURISTAS');

--**** TABLE INVENTARY ****----


CREATE TABLE INVENTARIO(
    ID NUMBER NOT NULL PRIMARY KEY,
    NOMBRE VARCHAR2(60) NOT NULL,
    CANTIDAD NUMBER NOT NULL,
    ESTADO CHAR NOT NULL,
    DESCRIPCION VARCHAR2(60) NOT NULL,
    ID_PRODUCTO NUMBER NOT NULL,
    ID_DEPARTAMENTO VARCHAR2(60) NOT NULL,
    CONSTRAINT FK_ID_PRODUCTO FOREIGN KEY(ID_PRODUCTO) REFERENCES PRODUCTO (ID),
    CONSTRAINT FK_ID_DEPARTAMENTO FOREIGN KEY(ID_DEPARTAMENTO) REFERENCES DEPARTAMENTO (ID)
);

INSERT INTO INVENTARIO VALUES('1','MUEBLE',4,'Y','PARA EL LIVING',1,2);

INSERT INTO INVENTARIO VALUES('2','MUEBLE',1,'Y','PARA EL LIVING',2,3);

INSERT INTO INVENTARIO VALUES('3','MUEBLE',1,'Y','VER PARTIDOS ONLINE',1,1);



--**** TABLE TRANSPORT ****--

CREATE TABLE TRANSPORTE(
    ID VARCHAR2(60) NOT NULL PRIMARY KEY,
    CIUDAD VARCHAR(60) NOT NULL,
    VEHICULO VARCHAR(60) NOT NULL,
    HORARIO TIMESTAMP NOT NULL,
    CONDUCTOR VARCHAR2(60) NOT NULL,
    PRECIO NUMBER NOT NULL
);

INSERT INTO TRANSPORTE VALUES('1','LA SERENA','AUTO','22-08-22 14:00:00','THOMAS',10000);

--**** TABLE TOUR ****--

CREATE TABLE TOUR(
    ID VARCHAR2(60) NOT NULL PRIMARY KEY,
    CIUDAD VARCHAR2(60) NOT NULL,
    CUPO NUMBER NOT NULL,
    PRECIO NUMBER NOT NULL,
    DESCRIPCION VARCHAR2(60)
);

INSERT INTO TOUR VALUES('1','LA SERENA',3,7500,'PLAYA BONITA');

--**** TABLE SERVICE ****--

CREATE TABLE SERVICIO(
    ID VARCHAR2(60) NOT NULL PRIMARY KEY,
    FECHA_CONTRATO DATE NOT NULL,
    DESCRIPCION VARCHAR2(60),
    ID_TRANSPORTE VARCHAR2(60) NOT NULL,
    ID_TOUR VARCHAR2(60) NOT NULL,
    CONSTRAINT FK_ID_TRANSPORTE_SERVICIO FOREIGN KEY(ID_TRANSPORTE) REFERENCES TRANSPORTE(ID),
    CONSTRAINT FK_ID_TOUR_SERVICIO FOREIGN KEY(ID_TOUR) REFERENCES TOUR(ID)
);

INSERT INTO SERVICIO VALUES('1','22-08-22','DOS SERVICIOS CONTRATADOS','1','1');


--**** TABLE CKECKIN ****--

CREATE TABLE CHECKIN(
    ID VARCHAR2(60) NOT NULL PRIMARY KEY,
    FECHA_CONTRATO DATE NOT NULL,
    HORA_DE_ENTRADA TIMESTAMP NOT NULL,
    DESCRIPCION VARCHAR2(60),
    PAGO_COMPLETADO NUMBER NOT NULL
);

INSERT INTO CHECKIN VALUES('1','22-08-22','22-08-22 14:30:00','TRAEN SU MASCOTA',5000);

--**** TABLE CHECKOUT ****--

CREATE TABLE CHECKOUT(
    ID VARCHAR2(60) NOT NULL PRIMARY KEY,
    FECHA_CONTRATO DATE NOT NULL,
    HORA_DE_SALIDA TIMESTAMP NOT NULL,
    DESCRIPCION VARCHAR2(60),
    SUBTOTAL_INCONVENIENTES NUMBER NOT NULL
);

INSERT INTO CHECKOUT VALUES('1','22-08-22','23-08-22 14:30:00','TRAEN SU MASCOTA',5000);

--**** TABLE CHECKOUT ****--

CREATE TABLE RESERVA(
    ID VARCHAR2(60) NOT NULL PRIMARY KEY,
    FECHA_INICIO DATE NOT NULL,
    FECHA_SALIDA DATE NOT NULL,
    CANTIDAD_PERSONA NUMBER,
    ID_USUARIO VARCHAR2(10) NOT NULL,
    ID_DEPARTAMENTO VARCHAR2(60) NOT NULL,
    ID_SERVICIO VARCHAR2(60) NOT NULL,
    ID_CHECKIN VARCHAR2(60) NOT NULL,
    ID_CHECKOUT VARCHAR2(60) NOT NULL,
    CONSTRAINT FK_ID_USUARIO_RESERVA FOREIGN KEY(ID_USUARIO) REFERENCES USUARIO(RUT),
    CONSTRAINT FK_ID_DEPARTAMENTO_RESERVA FOREIGN KEY(ID_DEPARTAMENTO) REFERENCES DEPARTAMENTO(ID),
    CONSTRAINT FK_ID_SERVICIO_RESERVA FOREIGN KEY(ID_SERVICIO) REFERENCES SERVICIO(ID),
    CONSTRAINT FK_ID_CHECKIN_RESERVA FOREIGN KEY(ID_CHECKIN) REFERENCES CHECKIN(ID),
    CONSTRAINT FK_ID_CHECKOUT_RESERVA FOREIGN KEY(ID_CHECKOUT) REFERENCES CHECKOUT(ID)
);

INSERT INTO RESERVA VALUES('1','22-08-22','23-08-22',2,'18937755-K','1','1','1','1');

COMMIT;